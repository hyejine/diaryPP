<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  <mapper namespace="com.example.demo.model.dao.DiaryMapper">
  
  <insert id="saveQuill">
   INSERT INTO diary_table(user_email, diary_title, diary_content, diary_date, emoji_image_id, diary_create_write) VALUES (#{user_email}, #{diary_title}, #{diary_content}, #{diary_date}, #{emoji_image_id}, #{diary_create_write})
  </insert>

  <resultMap id="DiaryResult" type="DiaryDto">
    <result property="id" column="id"/>
    <result property="diary_create_write" column="diary_create_write"/>
    <result property="diary_date" column="diary_date"/>
    <result property="user_email" column="user_email"/>
    <result property="diary_title" column="diary_title"/>
    <result property="diary_content" column="diary_content"/>
    <collection property="emoji_image_id" column="emoji_image_id" javaType="java.util.ArrayList" ofType="EmojiImageDto" select="getEmojiImage"/>
</resultMap>

  <select id="getBoard" resultMap="DiaryResult">
	SELECT * FROM diary_table
  </select> 

  <select id="getEmojiImage" resultType="EmojiImageDto">
  SELECT * FROM emoji_image_table where id=#{emoji_image_id}
  </select>

</mapper>